(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{9189:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tsne-with-params",function(){return n(4212)}])},1961:function(e,t){"use strict";t.Z={src:"/gh-pages-test/_next/static/media/arrow-down-icon.10b4357f.svg",height:319,width:512}},1838:function(e,t){"use strict";t.Z={src:"/gh-pages-test/_next/static/media/error_icon.3a1cebc6.svg",height:32,width:32}},7656:function(){},4212:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(7568),i=n(1799),s=n(9396),a=n(655),o=n(5893),l=n(9008),c=n.n(l),d=n(5675),u=n.n(d);n(1664);var h=n(7294),g=n(594),p=n(3582),x=n(6180);n(7656);var m=n(1961),f=n(2345);function b(e){var t=e.props,n=e.handleChange,r=e.handleSubmit,i=(0,h.useState)(!1),s=i[0],a=i[1],l=(0,h.useState)(!1),c=l[0],d=l[1];return(0,h.useEffect)(function(){console.log("props.learning_rate",t.learning_rate),isNaN(t.learning_rate)&&"auto"!==t.learning_rate?d(!0):d(!1)},[t.learning_rate]),(0,o.jsxs)("div",{className:"w-1/2 min-w-[500px]",children:[(0,o.jsxs)("button",{onClick:function(){return a(!s)},className:"m-2 flex justify-center items-center gap-2",children:[(0,o.jsx)("span",{className:" text-lg font-bold",children:"Custom T-SNE Parameters"}),(0,o.jsx)(u(),{src:m.Z,alt:"arrowDown",width:20,height:15})]}),(0,o.jsx)(x.Collapse,{isOpened:s,children:(0,o.jsxs)("form",{className:"grid grid-cols-3 gap-2 ml-2 mb-4",children:[(0,o.jsx)("label",{for:"n_components",children:"n_components"}),(0,o.jsxs)("select",{id:"n_components",name:"n_components",className:"input-box",value:t.n_components,onChange:n,children:[(0,o.jsx)("option",{value:"2",children:"2"}),(0,o.jsx)("option",{value:"3",children:"3"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_components"}),(0,o.jsx)("div",{children:"Dimension of the embedded space."})]})}),(0,o.jsx)("label",{for:"perplexity",children:"perplexity"}),(0,o.jsx)("input",{type:"number",id:"perplexity",name:"perplexity",className:"input-box",step:"any",value:t.perplexity,onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"perplexity"}),(0,o.jsx)("div",{children:"The perplexity is related to the number of nearest neighbors that is used in other manifold learning algorithms. Larger datasets usually require a larger perplexity. Consider selecting a value between 5 and 50."})]})}),(0,o.jsx)("label",{for:"early_exaggeration",children:"early_exaggeration"}),(0,o.jsx)("input",{type:"number",id:"early_exaggeration",name:"early_exaggeration",className:"input-box",value:t.early_exaggeration,onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"early_exaggeration"}),(0,o.jsx)("div",{children:"Controls how tight natural clusters in the original space are in the embedded space and how much space will be between them"})]})}),(0,o.jsx)("label",{for:"learning_rate",children:"learning_rate"}),(0,o.jsx)("input",{type:"text",id:"learning_rate",name:"learning_rate",className:"input-box",value:t.learning_rate,onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"learning_rate"}),(0,o.jsx)("div",{children:"range [10.0, 1000.0]  the learning rate is too high, the data may look like a ‘ball’ with any point approximately equidistant from its nearest neighbours. If the learning rate is too low, most points may look compressed in a dense cloud with few outliers"})]})}),(0,o.jsx)("label",{for:"n_iter",children:"n_iter"}),(0,o.jsx)("input",{type:"number",id:"n_iter",name:"n_iter",className:"input-box",value:t.n_iter,step:"1",onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_iter"}),(0,o.jsx)("div",{children:"Maximum number of iterations for the optimization. Should be at least 250."})]})}),(0,o.jsx)("label",{for:"n_iter_without_progress",children:"n_iter_without_progress"}),(0,o.jsx)("input",{type:"number",id:"n_iter_without_progress",name:"n_iter_without_progress",className:"input-box",value:t.n_iter_without_progress,step:"1",onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_iter_without_progress"}),(0,o.jsx)("div",{children:"Maximum number of iterations without progress before we abort the optimization, used after 250 initial iterations with early exaggeration."})]})}),(0,o.jsx)("label",{for:"init",children:"init"}),(0,o.jsxs)("select",{type:"text",id:"init",name:"init",className:"input-box",value:t.init,placeholder:"random or pca",onChange:n,children:[(0,o.jsx)("option",{value:"pca",children:"pca"}),(0,o.jsx)("option",{value:"random",children:"random"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"init"}),(0,o.jsx)("div",{children:"Initialization of embedding. PCA initialization cannot be used with precomputed distances and is usually more globally stable than random initialization."})]})}),(0,o.jsx)("label",{for:"angle",children:"angle"}),(0,o.jsx)("input",{type:"number",id:"angle",name:"angle",className:"input-box",value:t.angle,onChange:n}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"angle"}),(0,o.jsx)("div",{children:"Range of 0.2 - 0.8. The angular size of a distant node as measured from a point, Angle less than 0.2 has quickly increasing computation time and angle greater 0.8 has quickly increasing error"})]})})]})}),!0===c?(0,o.jsx)("div",{className:"mx-2 text-red-600",children:"learning_rate value should be auto or Number."}):(0,o.jsx)("div",{}),(0,o.jsx)("input",{type:"submit",className:"m-2 p-1 rounded border-2 bg-white hover:bg-fuchsia-400 enabled:hover:text-white enabled:hover:cursor-pointer disabled:bg-gray-300",onClick:function(e){e.preventDefault(),r()},value:"Visualize",disabled:c})]})}n(8683);var j=n(169),_=n(1838),v=function(e){e.props;var t=(0,h.useState)(""),n=t[0],l=t[1],d=(0,h.useState)(!1);d[0],d[1];var x,m,f,v=(0,h.useState)(!1),y=v[0],w=v[1],N=(0,h.useState)("wait"),Z=N[0],C=N[1],S=(0,h.useState)({n_components:2,perplexity:30,early_exaggeration:12,learning_rate:"auto",n_iter:1e3,n_iter_without_progress:300,init:"pca",angle:.5}),E=S[0],k=S[1];console.log(E),"n_components=".concat(E.n_components,"&perplexity=").concat(E.perplexity,"&early_exaggeration=").concat(E.early_exaggeration),"&learning_rate=".concat(E.learning_rate,"&n_iter=").concat(E.n_iter,"&n_iter_without_progress=").concat(E.n_iter_without_progress),"&init=".concat(E.init,"&verbose=").concat(E.verbose,"&angle=").concat(E.angle),(0,h.useEffect)(function(){console.log("params was changed",E)},[E]);var z,D=(0,h.useCallback)((f=(0,r.Z)(function(e){var t,n,r;return(0,a.__generator)(this,function(i){switch(i.label){case 0:w(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),console.log("body:",e),[4,g.Z.post("http://localhost:8000/tsne/tsne-visualize",e,{responseType:"blob"})];case 2:return t=i.sent(),console.log("response",t),(n=new window.FileReader).readAsDataURL(t.data),n.onload=function(){l(n.result)},w(!1),console.log("url:",x),C("success"),[3,4];case 3:return r=i.sent(),l("/"),console.error(r),w(!1),C("fail"),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)}),[]),T=function(e){var t=e.target.name,n=e.target.value;console.log(t,n,Number(n)),"n_components"===t?k((0,s.Z)((0,i.Z)({},E),{n_components:n})):"perplexity"===t?k((0,s.Z)((0,i.Z)({},E),{perplexity:n})):"early_exaggeration"===t?k((0,s.Z)((0,i.Z)({},E),{early_exaggeration:n})):"learning_rate"===t?k((0,s.Z)((0,i.Z)({},E),{learning_rate:n})):"n_iter"===t?k((0,s.Z)((0,i.Z)({},E),{n_iter:parseInt(n)})):"n_iter_without_progress"===t?k((0,s.Z)((0,i.Z)({},E),{n_iter_without_progress:parseInt(n)})):"init"===t?k((0,s.Z)((0,i.Z)({},E),{init:n})):"verbose"===t?k((0,s.Z)((0,i.Z)({},E),{verbose:n})):"angle"===t&&k((0,s.Z)((0,i.Z)({},E),{angle:n}))},P=(z=(0,r.Z)(function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return console.log("Submit custom parameter input form"),[4,D(E)];case 1:return e.sent(),console.log("finish submit"),[2]}})}),function(){return z.apply(this,arguments)});(0,h.useEffect)(function(){console.log("error status",Z)},[Z]);var R=(0,o.jsx)("div",{children:(0,o.jsx)(u(),{src:n,alt:"T-SNE Projection",width:500,height:500})}),q=(0,o.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,o.jsx)(u(),{src:_.Z,alt:"Error",width:50,height:50}),(0,o.jsx)("span",{className:"text-lg text-red-600",children:"Something went wrong! Please try again."})]}),I=(0,o.jsx)("div",{children:(0,o.jsx)("span",{children:"Waiting for submit t-SNE "})});return(0,o.jsxs)("div",{className:"bg-fuchsia-50 p-2 h-full",children:[(0,o.jsxs)(c(),{children:[(0,o.jsx)("title",{children:"t-SNE visualization"}),(0,o.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)("div",{className:"font-bold",children:"T-SNE"}),(0,o.jsx)(b,{props:E,handleChange:T,handleSubmit:P}),(0,o.jsx)("div",{className:"flex justify-center items-center",children:y?(0,o.jsx)(p.Z,{}):"success"===Z?R:"fail"===Z?q:"wait"===Z?I:(0,o.jsx)(o.Fragment,{})}),(0,o.jsx)(j.Z,{isDisable:"success"!==Z})]})}},169:function(e,t,n){"use strict";var r=n(7568),i=n(655),s=n(5893),a=n(7294);t.Z=function(e){var t=e.isDisable,n=(0,a.useState)(!1),o=n[0],l=n[1];function c(){return(c=(0,r.Z)(function(){var e,t,n,r;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return l(!0),[4,fetch("http://localhost:8000/data/get-transformed-data")];case 1:return[4,e.sent().blob()];case 2:return t=e.sent(),n=window.URL.createObjectURL(t),(r=document.createElement("a")).href=n,r.download="transformed_data.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),l(!1),[2]}})})).apply(this,arguments)}return(0,a.useEffect)(function(){console.log("download button disable:",t)},[t]),(0,s.jsx)("button",{className:"m-2 p-1 rounded border bg-white enabled:hover:bg-fuchsia-400 enabled:hover:text-white disabled:bg-gray-300",onClick:function(){return c.apply(this,arguments)},disabled:t,children:o?"Downloading...":"Download Data"})}},3582:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5893);function i(){return(0,r.jsx)("div",{className:"spinner-container",children:(0,r.jsx)("div",{className:"loading-spinner"})})}}},function(e){e.O(0,[959,699,774,888,179],function(){return e(e.s=9189)}),_N_E=e.O()}]);