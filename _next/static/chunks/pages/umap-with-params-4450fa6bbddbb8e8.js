(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[766],{194:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/umap-with-params",function(){return i(713)}])},1961:function(e,n){"use strict";n.Z={src:"/gh-pages-test/_next/static/media/arrow-down-icon.10b4357f.svg",height:319,width:512}},1838:function(e,n){"use strict";n.Z={src:"/gh-pages-test/_next/static/media/error_icon.3a1cebc6.svg",height:32,width:32}},7656:function(){},713:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return _}});var s=i(7568),r=i(1799),t=i(9396),a=i(655),o=i(5893),l=i(9008),c=i.n(l),d=i(5675),h=i.n(d);i(1664);var u=i(7294),m=i(3582),p=i(594),x=i(6180);i(7656);var g=i(1961),f=i(2345);function b(e){var n=e.props,i=e.handleChange,s=e.handleSubmit,r=(0,u.useState)(!1),t=r[0],a=r[1],l=(0,u.useState)(!1),c=l[0],d=l[1];return console.log(n),(0,u.useEffect)(function(){console.log("props.min_dist",n.min_dist),n.min_dist>n.spread?d(!0):d(!1)}),(0,o.jsxs)("div",{className:"w-1/2 min-w-[500px]",children:[(0,o.jsxs)("button",{onClick:function(){return a(!t)},className:"m-2 flex justify-center items-center gap-2",children:[(0,o.jsx)("span",{className:" text-lg font-bold",children:"Custom UMAP Parameters"}),(0,o.jsx)(h(),{src:g.Z,alt:"arrowDown",width:20,height:15})]}),(0,o.jsx)(x.Collapse,{isOpened:t,children:(0,o.jsxs)("form",{className:"grid grid-cols-3 gap-2 ml-2 mb-4",children:[(0,o.jsx)("label",{for:"n_components",children:"n_components"}),(0,o.jsxs)("select",{type:"number",id:"n_components",name:"n_components",className:"input-box",value:n.n_components,onChange:i,children:[(0,o.jsx)("option",{value:"2",children:"2"}),(0,o.jsx)("option",{value:"3",children:"3"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_components"}),(0,o.jsx)("div",{children:"Dimension of the embedded space."})]})}),(0,o.jsx)("label",{for:"n_neighbors",children:"n_neighbors"}),(0,o.jsx)("input",{type:"number",id:"n_neighbors",name:"n_neighbors",className:"input-box",value:n.n_neighbors,step:"1",onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_neighbors"}),(0,o.jsx)("div",{className:"",children:"The size of local neighborhood (in terms of number of neighboring sample points) used for manifold approximation. Larger values result in more global views of the manifold, while smaller values result in more local data being preserved. In general values should be in the range 2 to 100."})]})}),(0,o.jsx)("label",{for:"learning_rate",children:"learning_rate"}),(0,o.jsx)("input",{type:"number",id:"learning_rate",name:"learning_rate",className:"input-box",value:n.learning_rate,onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"learning_rate"}),(0,o.jsx)("div",{children:"The initial learning rate for the embedding optimization."})]})}),(0,o.jsx)("label",{for:"metric",children:"metric"}),(0,o.jsxs)("select",{id:"metric",name:"metric",className:"input-box",value:n.metric,onChange:i,children:[(0,o.jsx)("option",{value:"euclidean",children:"euclidean"}),(0,o.jsx)("option",{value:"manhattan",children:"manhattan"}),(0,o.jsx)("option",{value:"chebyshev",children:"chebyshev"}),(0,o.jsx)("option",{value:"minkowski",children:"minkowski"}),(0,o.jsx)("option",{value:"canberra",children:"canberra"}),(0,o.jsx)("option",{value:"braycurtis",children:"braycurtis"}),(0,o.jsx)("option",{value:"mahalanobis",children:"mahalanobis"}),(0,o.jsx)("option",{value:"wminkowski",children:"wminkowski"}),(0,o.jsx)("option",{value:"seuclidean",children:"seuclidean"}),(0,o.jsx)("option",{value:"cosine",children:"cosine"}),(0,o.jsx)("option",{value:"correlation",children:"correlation"}),(0,o.jsx)("option",{value:"haversine",children:"haversine"}),(0,o.jsx)("option",{value:"hamming",children:"hamming"}),(0,o.jsx)("option",{value:"haversine",children:"haversine"}),(0,o.jsx)("option",{value:"jaccard",children:"jaccard"}),(0,o.jsx)("option",{value:"dice",children:"dice"}),(0,o.jsx)("option",{value:"russelrao",children:"russelrao"}),(0,o.jsx)("option",{value:"kulsinski",children:"kulsinski"}),(0,o.jsx)("option",{value:"ll_dirichlet",children:"ll_dirichlet"}),(0,o.jsx)("option",{value:"hellinger",children:"hellinger"}),(0,o.jsx)("option",{value:"rogerstanimoto",children:"rogerstanimoto"}),(0,o.jsx)("option",{value:"sokalmichener",children:"sokalmichener"}),(0,o.jsx)("option",{value:"sokalsneath",children:"sokalsneath"}),(0,o.jsx)("option",{value:"yule",children:"yule"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"metric"}),(0,o.jsx)("div",{children:"The metric to use to compute distances in high dimensional space."})]})}),(0,o.jsx)("label",{for:"n_epochs",children:"n_epochs"}),(0,o.jsx)("input",{type:"number",id:"n_epochs",name:"n_epochs",className:"input-box",value:n.n_epochs,step:"1",onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"n_epochs"}),(0,o.jsx)("div",{children:"The number of training epochs to be used in optimizing the low dimensional embedding. Larger values result in more accurate embeddings. If None is specified a value will be selected based on the size of the input dataset (200 for large datasets, 500 for small)."})]})}),(0,o.jsx)("label",{for:"init",children:"init"}),(0,o.jsxs)("select",{id:"init",name:"init",className:"input-box",value:n.init,placeholder:"random or pca",onChange:i,children:[(0,o.jsx)("option",{value:"spectral",children:"spectral"}),(0,o.jsx)("option",{value:"random",children:"random"}),(0,o.jsx)("option",{value:"pca",children:"pca"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"init"}),(0,o.jsx)("div",{children:"How to initialize the low dimensional embedding. Options are: ‘spectral’ , ‘random’ , ‘pca’ , A numpy array of initial embedding positions."})]})}),(0,o.jsx)("label",{for:"min_dist",children:"min_dist"}),(0,o.jsx)("input",{type:"number",id:"min_dist",name:"min_dist",className:"input-box",value:n.min_dist,onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"min_dist"}),(0,o.jsxs)("div",{children:["The effective minimum distance between embedded points. Smaller values will result in a more clustered/clumped embedding where nearby points on the manifold are drawn closer together, while larger values will result on a more even dispersal of points. ",(0,o.jsx)("b",{children:"min_dist must be less than or equal to spread"})]})]})}),(0,o.jsx)("label",{for:"spread",children:"spread"}),(0,o.jsx)("input",{type:"number",id:"spread",name:"spread",className:"input-box",value:n.spread,onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"spread"}),(0,o.jsx)("div",{children:"The effective scale of embedded points. In combination with min_dist this determines how clustered/clumped the embedded points are."})]})}),(0,o.jsx)("label",{for:"low_memory",children:"low_memory"}),(0,o.jsxs)("select",{id:"low_memory",name:"low_memory",className:"input-box",value:n.low_memory,onChange:i,children:[(0,o.jsx)("option",{value:"true",children:"true"}),(0,o.jsx)("option",{value:"false",children:"false"})]}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"low_memory"}),(0,o.jsx)("div",{children:"For some datasets the nearest neighbor computation can consume a lot of memory. If you find that UMAP is failing due to memory constraints consider setting this option to True."})]})}),(0,o.jsx)("label",{for:"transform_seed",children:"transform_seed"}),(0,o.jsx)("input",{type:"number",id:"transform_seed",name:"transform_seed",className:"input-box",value:n.transform_seed,onChange:i}),(0,o.jsx)(f.Z,{trigger:(0,o.jsx)("div",{className:"flex items-center justify-center w-5 h-5 mt-1 rounded-full border bg-white hover:bg-gray-200 cursor-pointer",children:"?"}),position:"right center",children:(0,o.jsxs)("div",{className:"p-1",children:[(0,o.jsx)("div",{className:"text-lg font-bold flex justify-center",children:"transform_seed"}),(0,o.jsx)("div",{children:"Random seed used for the stochastic aspects of the transform operation. This ensures consistency in transform operations."})]})})]})}),!0===c?(0,o.jsx)("div",{className:"mx-2 text-red-600",children:"min_dist must be less than or equal to spread."}):(0,o.jsx)("div",{}),(0,o.jsx)("input",{type:"submit",className:"m-2 p-1 rounded border-2 bg-white hover:bg-fuchsia-400 enabled:hover:text-white enabled:hover:cursor-pointer disabled:bg-gray-300",onClick:function(e){e.preventDefault(),s()},disabled:c,value:"Visualize"})]})}i(8683);var j=i(169),v=i(1838),_=function(){var e,n=(0,u.useState)(""),i=n[0],l=n[1],d=(0,u.useState)(!1);d[0],d[1];var x,g=(0,u.useState)(!1),f=g[0],_=g[1],w=(0,u.useState)("wait"),y=w[0],N=w[1],Z=(0,u.useState)({n_neighbors:15,n_components:2,metric:"euclidean",n_epochs:200,learning_rate:1,init:"spectral",min_dist:.1,spread:1,low_memory:!0,transform_seed:42}),k=Z[0],C=Z[1];(0,u.useEffect)(function(){console.log("params was changed",k)},[k]);var S,P=(0,u.useCallback)((x=(0,s.Z)(function(n){var i,s,r;return(0,a.__generator)(this,function(t){switch(t.label){case 0:_(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),console.log("body:",n),[4,p.Z.post("http://localhost:8000/umap/umap-visualize",n,{responseType:"blob"})];case 2:return i=t.sent(),console.log("response",i),(s=new window.FileReader).readAsDataURL(i.data),s.onload=function(){l(s.result)},_(!1),console.log("url:",e),N("success"),[3,4];case 3:return r=t.sent(),l("/"),console.error(r),_(!1),N("fail"),[3,4];case 4:return[2]}})}),function(e){return x.apply(this,arguments)}),[]),T=function(e){var n=e.target.name,i=e.target.value;console.log(n,i,Number(i)),"n_components"===n?C((0,t.Z)((0,r.Z)({},k),{n_components:i})):"n_neighbors"===n?C((0,t.Z)((0,r.Z)({},k),{n_neighbors:parseInt(i)})):"metric"===n?C((0,t.Z)((0,r.Z)({},k),{metric:i})):"learning_rate"===n?C((0,t.Z)((0,r.Z)({},k),{learning_rate:i})):"n_epochs"===n?C((0,t.Z)((0,r.Z)({},k),{n_epochs:parseInt(i)})):"min_dist"===n?C((0,t.Z)((0,r.Z)({},k),{min_dist:i})):"init"===n?C((0,t.Z)((0,r.Z)({},k),{init:i})):"spread"===n?C((0,t.Z)((0,r.Z)({},k),{spread:i})):"low_memory"===n?C((0,t.Z)((0,r.Z)({},k),{low_memory:i})):"transform_seed"===n&&C((0,t.Z)((0,r.Z)({},k),{transform_seed:i}))},E=(S=(0,s.Z)(function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return console.log("Submit custom parameter input form"),[4,P(k)];case 1:return e.sent(),console.log("finish submit"),[2]}})}),function(){return S.apply(this,arguments)}),U=(0,o.jsx)("div",{children:(0,o.jsx)(h(),{src:i,alt:"UMAP Projection",width:500,height:500})}),z=(0,o.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,o.jsx)(h(),{src:v.Z,alt:"Error",width:50,height:50}),(0,o.jsx)("span",{className:"text-lg text-red-600",children:"Something went wrong! Please try again."})]}),A=(0,o.jsx)("div",{children:(0,o.jsx)("span",{className:"text-lg",children:"Waiting for submit UMAP"})});return(0,o.jsxs)("div",{className:"bg-fuchsia-50 p-2 h-full",children:[(0,o.jsxs)(c(),{children:[(0,o.jsx)("title",{children:"UMAP visualization"}),(0,o.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)("div",{className:"font-bold",children:"UMAP"}),(0,o.jsx)(b,{props:k,handleChange:T,handleSubmit:E}),(0,o.jsx)("div",{className:"flex justify-center items-center",children:f?(0,o.jsx)(m.Z,{}):"success"===y?U:"fail"===y?z:"wait"===y?A:(0,o.jsx)(o.Fragment,{})}),(0,o.jsx)(j.Z,{})]})}},169:function(e,n,i){"use strict";var s=i(7568),r=i(655),t=i(5893),a=i(7294);n.Z=function(e){var n=e.isDisable,i=(0,a.useState)(!1),o=i[0],l=i[1];function c(){return(c=(0,s.Z)(function(){var e,n,i,s;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return l(!0),[4,fetch("http://localhost:8000/data/get-transformed-data")];case 1:return[4,e.sent().blob()];case 2:return n=e.sent(),i=window.URL.createObjectURL(n),(s=document.createElement("a")).href=i,s.download="transformed_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),l(!1),[2]}})})).apply(this,arguments)}return(0,a.useEffect)(function(){console.log("download button disable:",n)},[n]),(0,t.jsx)("button",{className:"m-2 p-1 rounded border bg-white enabled:hover:bg-fuchsia-400 enabled:hover:text-white disabled:bg-gray-300",onClick:function(){return c.apply(this,arguments)},disabled:n,children:o?"Downloading...":"Download Data"})}},3582:function(e,n,i){"use strict";i.d(n,{Z:function(){return r}});var s=i(5893);function r(){return(0,s.jsx)("div",{className:"spinner-container",children:(0,s.jsx)("div",{className:"loading-spinner"})})}}},function(e){e.O(0,[959,699,774,888,179],function(){return e(e.s=194)}),_N_E=e.O()}]);